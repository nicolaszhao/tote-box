!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("lodash"),require("urijs")):"function"==typeof define&&define.amd?define(["lodash","urijs"],e):"object"==typeof exports?exports.ToteBox=e(require("lodash"),require("urijs")):t.ToteBox=e(t.Lodash,t.URI)}(window,function(t,e){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e,n){"use strict";n.r(e);var r=n(0);function o(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=/\{([^}]+)\}/g;return o.test(t)&&Object(r.isPlainObject)(e)&&!Object(r.isEmpty)(e)?t.replace(o,function(t,o){var i=e[o];return Object(r.isUndefined)(i)?t:(n&&delete e[o],i)}):t}function i(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.replace(/\{(\d+)\}/g,function(t,e){return n[e]})}function a(t){var e=-1;do{t/=1024,e++}while(t>=1024);return parseFloat(Math.max(t,.1).toFixed(2))+["KB","MB","GB","TB","PB","EB"][e]}function u(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var c={entityify:function(t){var e={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"};return t.replace(/[<>"&]/g,function(t){return e[t]})},deentityify:function(t){var e={quot:'"',lt:"<",gt:">"};return t.replace(/&([^&;]+);/g,function(t,n){var r=e[n];return"string"==typeof r?r:t})},strip:function(t){return t.replace(/<(?:.|\s)*?>/g,"")},escape:function(t){if("string"!=typeof t)return"";return t.replace(/<script[^>]*>(?:(?:(?!<\/script>).)*<\/script>)?/gi,"").replace(/<style[^>]*>(?:(?!@import|<\/style>).)*@import(?:(?!<\/style>).)+<\/style>/gi,"").replace(/<link(?:(?!\.css).)+\.css[^>]*>/gi,"").replace(/on[a-zA-Z]+\s*=\s*(?:'[^']*'|"[^"]*"|[^\s\/>]+)/gi,"").replace(/javascript:/gi,"")},filter:function(t,e){return""===t?"":(t=u(t=t.replace(/\s{2,}/g," ").replace(/<br\s*\/?>/g,"\n").replace(/(\s*&(n|N)(b|B)(s|S)(p|P);\s*)+/g," ").replace(/'/g,"''")),t=this.strip(t),"number"==typeof e&&(t=t.substring(0,e)),t)}},f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.id,r=void 0===n?"id":n,o=e.parentId,i=void 0===o?"parentId":o,a=e.rootParentId,u=void 0===a?0:a,c=e.children,l=void 0===c?"children":c,s=[],h={},v=[],p=0;p<t.length;p++)h[t[p][r]]=p,s.push(f({},t[p],d({},l,[])));for(var y=0;y<s.length;y++){var g=s[y];if(g[i]!==u){var m=h[g[i]];if("number"==typeof m)s[m].children.push(g)}else v.push(g)}return v}function s(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,o=t.concat();!function t(){setTimeout(function(){e.call(n,o.shift()),o.length&&t()},r)}()}function h(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:v,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=o.runDuration,a=void 0===i?25:i,u=o.chunkDuration,c=void 0===u?50:u,f=t.concat();!function t(){setTimeout(function(){var o=Date.now();do{e.call(n,f.shift())}while(f.length&&Date.now()-o<c);f.length?t():r()},a)}()}function v(){}var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g(t){if(null==t)return t+"";var e={};return"Number String Boolean Array Function Object Math Date RegExp Error".split(" ").forEach(function(t){e["[object "+t+"]"]=t.toLowerCase()}),e[Object.prototype.toString.call(t)]||(void 0===t?"undefined":p(t))}function m(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(!n.length)return t;var o=n.shift(),i=Object.keys(o),a=!0,u=!1,c=void 0;try{for(var f,d=i[Symbol.iterator]();!(a=(f=d.next()).done);a=!0){var l=f.value;"object"===g(o[l])||"array"===g(o[l])?(t[l]||Object.assign(t,y({},l,"object"===g(o[l])?{}:[])),m(t[l],o[l])):Object.assign(t,y({},l,o[l]))}}catch(t){u=!0,c=t}finally{try{!a&&d.return&&d.return()}finally{if(u)throw c}}return m.apply(void 0,[t].concat(n))}function b(t,e){var n=e-t+1;return Math.floor(Math.random()*n+t)}function w(t){return t%4==0&&(t%100!=0||t%400==0)}function j(t,e){if(""===e)return null;var n=-1,r=-1,o=-1,i=0,a=new Date,u=void 0,c=void 0,f=function(n){var r=function(e){var n=u+1<t.length&&t.charAt(u+1)===e;return n&&u++,n}(n),o=new RegExp("^\\d{1,"+("y"===n&&r?4:2)+"}"),a=e.substring(i).match(o);if(!a)throw"Missing number at position "+i;return i+=a[0].length,parseInt(a[0],10)},d=function(){if(e.charAt(i)!==t.charAt(u))throw"Unexpected literal at position "+i;i++};for(u=0;u<t.length;u++)switch(t.charAt(u)){case"d":o=f("d");break;case"m":r=f("m");break;case"y":n=f("y");break;default:d()}if(i<e.length&&(c=e.substr(i),!/^\s+/.test(c)))throw"Extra/unparsed characters found in date: "+c;if(-1===n?n=a.getFullYear():n<100&&(n+=a.getFullYear()-a.getFullYear()%100),(a=new Date(n,r-1,o)).getFullYear()!==n||a.getMonth()+1!==r||a.getDate()!==o)throw"Invalid date";return a}function x(t,e){if(!e)return"";var n="",r=void 0,o=function(e){var n=r+1<t.length&&t.charAt(r+1)===e;return n&&r++,n},i=function(t,e,n){var r=""+e;if(o(t))for(;r.length<n;)r="0"+r;return r};for(r=0;r<t.length;r++)switch(t.charAt(r)){case"d":n+=i("d",e.getDate(),2);break;case"m":n+=i("m",e.getMonth()+1,2);break;case"y":n+=o("y")?e.getFullYear():(e.getYear()%100<10?"0":"")+e.getYear()%100;break;default:n+=t.charAt(r)}return n}function O(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function S(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"年 月 周 天 小时 分钟 秒".split(" "),n="year month week day hours minutes second".split(" "),r=[1,12,4,7,24,60,60],o={},i=[];return n.reduce(function(e,n,i){var a=void 0;return a=0===i?t/31536e6:(e-Math.floor(e))*r[i],o[n]=Math.floor(a),a},t),n.forEach(function(t,n){o[t]&&i.push(""+o[t]+e[n])}),i}function k(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.onStart,r=void 0===n?E:n,o=e.onProgress,i=void 0===o?E:o,a=e.onEnd,u=void 0===a?E:a,c=arguments[2];if("date"!==g(t)&&"number"!==g(t))throw new Error("The value of params must be a Date or Number.");var f="date"===g(t)?"date":"second",d=t,l=void 0,s=function(t){var e=t-Date.now(),n=void 0,r=void 0,o=void 0;return n=r=o=0,e>0&&(n=Math.floor(e/36e5),r=Math.floor(e/6e4)-60*n,o=Math.floor(e/1e3)-60*n*60-60*r),{dif:e,hours:n,minutes:r,second:o}};return{start:function(){if("date"===f){var e=s(d),n=(e.dif,O(e,["dif"]));t=n}r.bind(c)(t),function e(){l=setTimeout(function(){if("date"===f){var n=s(d),r=n.dif,o=O(n,["dif"]);if(t=o,r<=0)return u.bind(c)(t);i.bind(c)(t)}else{if(!t)return u.bind(c)(t);i.bind(c)(--t)}e()},1e3)}()},stop:function(e){clearTimeout(l),e&&e.bind(c)(t)}}}function E(){}var I={get:function(t){return JSON.parse(localStorage.getItem(t))},set:function(t,e){e="string"!=typeof e?JSON.stringify(e):e;try{localStorage.setItem(t,e)}catch(n){console.error("cache.set("+t+", "+e+") error: "+n.message+".")}},remove:function(t){localStorage.removeItem(t)},clear:function(){localStorage.clear()}},P={get:function(t,e){var n=I.get(t);return"object"!==g(n)||"undefined"===g(n[e])?null:n[e]},set:function(t,e,n){var o=I.get(t)||{},i=o[e];i&&g(i)===g(n)&&Object(r.isPlainObject)(n)?o[e]=Object.assign({},i,n):o[e]=n,I.set(t,o)},remove:function(t,e){var n=I.get(t);"object"===g(n)&&(delete n[e],I.set(t,n))},clear:function(t){"object"===g(I.get(t))&&I.set(t,null)}},T={get:function(t){var e="(?:;\\s)?"+encodeURIComponent(t)+"=([^;]*);?";return new RegExp(e).test(document.cookie)?decodeURIComponent(RegExp.$1):null},set:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.expires,o=n.path,i=n.domain,a=n.secure,u=encodeURIComponent(t)+"="+encodeURIComponent(e);r instanceof Date&&(u+="; expires="+r.toGMTString()),o&&(u+="; path="+o),i&&(u+="; domain="+i),a&&(u+="; secure"),document.cookie=u},remove:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.path,r=e.domain,o=e.secure,i={expires:new Date(0),path:n,domain:r,secure:o};this.set(t,"",i)}};function A(t){var e=void 0,n=void 0;void 0!==document.hidden?(e="hidden",n="visibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",n="webkitvisibilitychange"),document.addEventListener(n,function(){"function"==typeof t&&t(!document[e])},!1)}function M(t){var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function D(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-src",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,n="DOMContentLoaded load resize scroll".split(" "),r=e.querySelectorAll("img["+t+"]");if(r.length){var o=function(){var e=!0,n=!1,o=void 0;try{for(var i,a=r[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var u=i.value,c=void 0;M(u)&&(c=u.getAttribute(t))&&(u.setAttribute("src",c),u.removeAttribute(t))}}catch(t){n=!0,o=t}finally{try{!e&&a.return&&a.return()}finally{if(n)throw o}}};n.forEach(function(t){window.addEventListener(t,o,!1)})}}function C(t,e,n,r){var o=void 0;"js"===t?(o=document.createElement("script")).type="text/javascript":"css"===t&&((o=document.createElement("link")).rel="stylesheet",o.type="text/css"),n&&(o.readyState?o.onreadystatechange=function(){"loaded"!=o.readyState&&"complete"!=o.readyState||(o.onreadystatechange=null,n.bind(r)())}:o.onload=function(){n.bind(r)()}),o["js"===t?"src":"href"]=e,document.getElementsByTagName("head")[0].appendChild(o)}var R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),U=/^([^?#]+)(\?[^#]+)?(#.+)?/;function N(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=/^([^=]+)(?:=(.*))?$/,n=U.exec(t)||[],r=B(n,3)[2];if(!r)return null;for(var o={},i=r.substring(1).split("&"),a=i.length,u=0;u<a;u++){var c=e.exec(i[u]);if(c){var f=B(c,3),d=f[1],l=f[2];d=decodeURIComponent(d),l=void 0!==l?decodeURIComponent(l):"",o[d]=/\d+/.test(l)?+l:l}}return o}function q(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=N(t)||{},r=!0,o=!1,i=void 0;try{for(var a,u=Object.keys(e)[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var c=a.value;n[c]=e[c]}}catch(t){o=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}var f=[],d=!0,l=!1,s=void 0;try{for(var h,v=Object.keys(n)[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var p=h.value;f.push(encodeURIComponent(p)+"="+encodeURIComponent(n[p]))}}catch(t){l=!0,s=t}finally{try{!d&&v.return&&v.return()}finally{if(l)throw s}}if(!f.length)return t;var y=U.exec(t),g=B(y,4),m=g[1],b=g[3],w=void 0===b?"":b;return m+"?"+f.join("&")+w}function F(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0],o=e[1];if(r){if("object"===(void 0===r?"undefined":R(r))){var i=[window.location.href,r];r=i[0],o=i[1]}}else r=window.location.href;return o?q(r,o):N(r)}var Y=n(1),L=n.n(Y),_='请求接口"{url}"时出错，错误信息：{message}',z=function(t,e){var n=void 0,r=[fetch(t,e).then(function(e){return e.json().then(function(t){return 0===t.status?t.data:Promise.reject(t)},function(e){throw new Error(o(_,{url:t,message:e.message}))})},function(e){throw new Error(o(_,{url:t,message:e.message}))}),new Promise(function(e,r){n=function(){r(new Error(o(_,{url:t,message:"abort"})))}})],i=e.timeout,a=void 0;i&&(delete e.timeout,a=new Promise(function(e,n){setTimeout(function(){return n(new Error(o(_,{url:t,message:"请求超时"})))},i)}),r.push(a));var u=Promise.race(r);return u.abort=n,u};"get post put patch delete".split(" ").forEach(function(t){z[t]=function(e,n,i){return e=o(e,n,!0),i=Object.assign({method:t.toUpperCase()},z.defaults,i),"get"===t||"delete"===t?Object(r.isPlainObject)(n)&&!Object(r.isEmpty)(n)&&(e=(e=new L.a(e)).query(n).href()):i=Object.assign(i,{body:Object(r.isPlainObject)(n)&&!Object(r.isEmpty)(n)?JSON.stringify(n):""}),z(e,i)}}),z.defaults={};var H=z;function J(t,e){var n=document.createElement("script"),r=void 0,o=void 0,i=void 0,a=void 0,u=void 0,c=void 0;if(n.type="text/javascript",-1!==(i=e.jsonpCallback).indexOf("."))for(o=i.split("."),window[o[0]]=r={},u=1;u<o.length;u++)u<o.length-1?r=r[o[u]]={}:r[o[u]]=function(){a=arguments[0]};else window[i]=function(){a=arguments[0]};e.timeout&&(c=setTimeout(function(){delete e.done,"function"==typeof e.fail&&e.fail()},e.timeout)),n.readyState?n.onreadystatechange=function(){"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onreadystatechange=null,clearTimeout(c),"function"==typeof e.done&&e.done(a))}:n.onload=function(){clearTimeout(c),"function"==typeof e.done&&e.done(a)},n.src=t,(document.head||document.getElementsByTagName("head")[0]).appendChild(n)}var $=function(){this.stack=[],this.activeIndex=0};$.prototype={constructor:$,getActive:function(){return this.stack[this.activeIndex]},getPrev:function(){return this.stack[this.activeIndex-1]},getNext:function(){return this.stack[this.activeIndex+1]},size:function(){return this.stack.length},add:function(t){return this.getNext()&&(this.stack=this.stack.slice(0,this.activeIndex+1)),this.stack.push(t),this.activeIndex=this.stack.length-1,this.stack.length},find:function(t){var e,n,r=this.stack.length;for(n=0;n<r;n++)if(t===this.stack[n]){e=n;break}return e},direct:function(t){var e=this.find(t),n=this.activeIndex;return void 0!==e&&(this.activeIndex=e),e<n?-1:e>n?1:this.add(t)}};var G=$;n.d(e,"parseTextPlaceholder",function(){return o}),n.d(e,"parseNumberPlaceholder",function(){return i}),n.d(e,"formatSize",function(){return a}),n.d(e,"trim",function(){return u}),n.d(e,"html",function(){return c}),n.d(e,"arrayToTree",function(){return l}),n.d(e,"chunk",function(){return s}),n.d(e,"batch",function(){return h}),n.d(e,"type",function(){return g}),n.d(e,"deepAssign",function(){return m}),n.d(e,"random",function(){return b}),n.d(e,"isLeapYear",function(){return w}),n.d(e,"parseDate",function(){return j}),n.d(e,"formatDate",function(){return x}),n.d(e,"timeParser",function(){return S}),n.d(e,"countdown",function(){return k}),n.d(e,"noop",function(){return E}),n.d(e,"cache",function(){return I}),n.d(e,"cacheTable",function(){return P}),n.d(e,"cookie",function(){return T}),n.d(e,"listenPageVisibility",function(){return A}),n.d(e,"isElementInViewport",function(){return M}),n.d(e,"lazyLoadImage",function(){return D}),n.d(e,"loadFile",function(){return C}),n.d(e,"getQuerys",function(){return N}),n.d(e,"addQuerys",function(){return q}),n.d(e,"querys",function(){return F}),n.d(e,"http",function(){return H}),n.d(e,"jsonp",function(){return J}),n.d(e,"History",function(){return G})}])});